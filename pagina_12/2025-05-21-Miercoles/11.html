<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>La felicidad de votar. Contratapa. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>La felicidad de votar. Contratapa. </h1>
            <p></p><p>Mi hijo baja y se encuentra en la puerta a un policía que pregunta por su papá. No es una imagen muy auspiciosa. Pero no, el uniformado no anda investigando un delito, trae una citación que indica que el susodicho ha sido designado "Presidente de mesa" en las elecciones del domingo 18 en CABA. Cuando los dioses de la selección informática aleatoria sacan tu nombre no es una opción sino una obligación: se puede evitar la tarea si uno es candidato, está afiliado a un partido político o presenta un certificado médico. La tarea se retribuye con un viático de 60 mil pesos y otros 60 mil "si realiza la capacitación". Me llama la atención que aprender el sistema que se pondrá en práctica se presente como opcional, aunque tenga el anzuelo de un pago extra. Pienso en un domingo a las 7 de la mañana en la escuela, una jornada con diferentes grados de tensión y un cierre impredecible, pendiente de otros dioses informáticos encargados de la maquinola de voto electrónico. Pero no se me ocurre zafar. A veces te toca un deber cívico. Y de todos modos me atrae la idea: vivir "desde adentro" una elección, eso que tenemos ininterrumpidamente desde 1983. Fui fiscal en 2019. Esto suena distinto.</p><p>Entonces voy a la capacitación en el Colegio de Abogados, y somos muchos y prestamos atención como alumnos aplicados. Y el domingo estoy en una escuela de Coghlan a las 6.45, porque supongo que un presidente de mesa tiene que ser cumplidor y obsesivo, porque serán solo unas legislativas -¡desdobladas!- pero yo que crecí con Videla, yo que nací sin poder, tiendo a ver el voto como algo sagrado. Algo que, si te toca vigilar de algún modo, tenés que ponerte a la altura.</p><p>Las urnas, Boletas Únicas Electrónicas, actas, padrones, carteles informativos, útiles necesarios, se terminan distribuyendo a las 7.30, cuando ya empiezo a preocuparme. Pero el delegado general de la Justicia Electoral, los asesores técnicos, los fiscales generales, las trabajadoras del Correo (que no es el Argentino como en el pasado sino la empresa Andreani), los gendarmes, los auxiliares de toda clase, ponen una energía  y una eficacia inexplicable para semejante horario. Nadie esquiva el bulto ni pone mala cara. Todos colaboran, todo se resuelve: a las 8.05 la máquina espera el primer voto, que ingresará pocos minutos después.</p><p>Las elecciones provinciales de las últimas semanas traen la preocupación de la baja participación, y en mi caso esa preocupación se verifica casi de inmediato pero no en el padrón sino en el rubro "Autoridades de mesa". El vicepresidente y los auxiliares decidieron pegar el faltazo. Estoy solo en la mesa con la fiscal de Es Ahora Buenos Aires (es decir Leandro Santoro) y el de Buenos Aires Primero, o sea Lospennato. Los muchachos de La Libertad Avanza parecen tan convencidos del triunfo que ni se molestaron en mandar fiscales. Como única "Autoridad", entonces, cada vez que tenga que ir al baño tendré que llamar al gendarme para que cuide la urna. Es una sensación rara: cada miércoles de represión a los jubilados en el Congreso los gendarmes me caen un poco peor. Al menos este no está vestido de tortuga robocop.</p><p>Y la jornada avanza. Más rápido de lo que creía: de pronto miro el reloj y ya son las 13.45, no han dejado de venir votantes en ningún momento, apenas fui picando de la vianda que me dejaron y poco después caerán mis hijos a votar y a dejarme unos bizcochitos de grasa para seguir tirando. Un fiscal general pasa a preguntar cómo viene la cosa y se sorprende de la cantidad de sufragios ya cumplidos, parece que no es la tendencia general en la misma escuela. Juego a adivinar a quién vota cada uno, es fácil acertar con cierto perfil de señora bián o de pibe libertario, aunque también creo detectar al compañero/a o el zurdo/a irreductible que no se deja arrastrar por el "voto útil". Avergonzamos a quienes votan por primera vez con un aplauso general, estoy con otras dos mesas en el salón de actos y por momentos todo parece efectivamente un evento escolar. Una piba debutante me regala una bolsa de uvas mientras sus papás la filman con la cara partida por una sonrisa: hay algo en los tres que huele a orgullo peroncho, pero me guardo los comentarios. Soy presidente de mesa, tengo que guardar las formas. Vota una monja, la elección es también un acto de fe. En dos o tres ocasiones hay que asistir a personas de edad que temen enfrentarse a una máquina infernal: inmediatamente se materializa un asesor técnico que desparrama buena onda y paciencia. No hay incidentes, ni voto cantado ni voto recurrido ni discusiones entre los fiscales, que conversan con la mejor onda. No hablan de política, claro.</p><p>Chequear DNI, entregar la BUE, explicar el tema de los dos troqueles de control, remarcar que doblen bien la boleta antes de volver a la urna. Firmar la constancia, cortar con una reglita, pedir la firma, devolver el DNI, marcar el padrón auxiliar. En poco tiempo me vuelvo un experto. Le sonrío a todos.</p><p>Dos minutos antes de las 18 cae el último elector. Tal como preveía el fiscal general, mi mesa marca una tendencia que contrasta con lo que se sabrá poco después: aquí votaron 253 personas, el 73 por ciento del padrón. La máquina no ofrece resistencia para el recuento. Adorni obtiene el 32,4 por ciento; Santoro el 24,12; Lospennato el 14,58; Rodríguez Larreta el 11,17. "Mirá, tres votos para el coreano, ¿quién vota al coreano?", chucea el fiscal de Buenos Aires Primero, quizá para evitar los comentarios sobre la pobre performance de su candidata. Hay siete votos en blanco. Uno de los votos no tiene ninguna impresión, salta una alarma roja y queda "recurrido". Se repite la misma afiebrada actividad: las "autoridades de mesa" fajamos las urnas con sus votos y acta, guardamos más actas y padrones en un "bolsín" precintado, las BUE y útiles no usados en otra bolsa, hacemos cola en la oficina donde una trabajadora del Correo recibe todo, luego en otra donde el delegado general de Justicia hace la transmisión de datos.</p><p>Una hora y media después del cierre del comicio, todos nos estamos cruzando en el  mismo hall. Y a pesar del cansancio, de la adrenalina en descenso, el lugar está ganado por una curiosa energía: como doce horas atrás, flota una indiscutible sensación de alegría y orgullo. Nos saludamos, nos felicitamos, nos agradecemos, nos sonreímos unos a otros, encaramos la salida con el férreo convencimiento de haber colaborado en algo importante. Sagrado.</p><p>Quince minutos antes de caer rendido, entreveo los análisis en la tele. El eje inevitable es la participación de solo el 53 por ciento del padrón. Pero mi desolación es aún más profunda que la que exhiben algunos analistas. Acabo de pasar un día entero con personas de diferente extracción política, social, laboral, etaria, y a todos nos unió la convicción y la alegría del acto democrático. El valor que tiene acudir a las urnas en un país donde durante muchos años nos lo negaron, a menudo a sangre y fuego. Me duele que a decenas de miles de personas, por las razones que sean, el acto de votar les haya parecido opcional, secundario, descartable, inútil. Quiero creer que a la clase política le dolerá con la misma intensidad, que se pondrá a laburar en serio para recordarle a la ciudadanía que la democracia es imperfecta pero esencial. Que fundamentará esa apelación sintonizando con el pueblo más que con la rosca. Que votar no es un "mal necesario". Que ser parte del asunto, como votante, como fiscal, como autoridad de mesa, como laburante del complejo sistema que se pone en marcha para garantizar las elecciones, no es solo un deber ciudadano. Es, también y aunque suene ingenuo, un día de felicidad.</p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                    🔊 Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    ⏸️ Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    ▶️ Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    ⏹️ Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/827415-la-felicidad-de-votar'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la página principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: 'La felicidad de votar. Contratapa. ', // Opcional, pero recomendado     
                text: 'La felicidad de votar. Contratapa. ',  // Opcional
                url: 'https://www.pagina12.com.ar/827415-la-felicidad-de-votar'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // Código alternativo si la API Web Share no está disponible
                console.log("Web Share API no soportada");
                // Puedes usar aquí la opción 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuación común
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oración es muy larga, dividirla en la coma más cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya terminó, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>