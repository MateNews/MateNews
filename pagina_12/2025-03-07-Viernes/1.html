<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>La tormenta provocó estragos. Un impresionante temporal dejó a Bahía Blanca bajo el agua. Las lluvias comenzaron durante la madrugada. En pocas horas cayeron 250 milímetros. Las clases fueron suspendidas y hay complicaciones en toda la ciudad. En el Hospital Penna tuvieron que evacuar el área de neonatología.. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>La tormenta provocó estragos. Un impresionante temporal dejó a Bahía Blanca bajo el agua. Las lluvias comenzaron durante la madrugada. En pocas horas cayeron 250 milímetros. Las clases fueron suspendidas y hay complicaciones en toda la ciudad. En el Hospital Penna tuvieron que evacuar el área de neonatología.. </h1>
            <p>Inundaciones, evacuados y múltiples complicaciones por las fuertes lluvias</p><p></p><p>La situación en Bahía Blanca producto de un fuerte temporal desatado en las últimas horas es gravísima. El viento y las lluvias no solo cortaron el suministro de los servicios e impidieron la circulación por las calles, sino que también cerraron rutas, arrastraron automóviles. El agua inundó cientos de viviendas, comercios, instituciones públicas y hasta el hospital local, donde pacientes internados y niños recién nacidos debieron ser socorridos y trasladados.</p><p>Según los últimos informes, el acumulado de lluvias alcanzó los 260 milímetros y se espera que a lo largo de la tarde la tormenta continúe de leve a moderada. Los organismos oficiales estimaron que el pico de la tormenta ya pasó pero advirtieron que las precipitaciones continuarán.</p><p></p><p>Más de 40 familias debieron ser evacuadas, se suspendieron las clases en todos los niveles y se restringió la circulación del transporte público. La tormenta afectó diversos servicios e innumerables problemas en el Hospital Penna, donde debió ser evacuada el área de Neonatología.</p><p>El impacto del temporal golpeó también a las localidades de Coronel Rosales, Monte Hermoso y Patagones, pero en Bahía Blanca los destrozos fueron cuantiosos: caminos de tierra cedieron ante socavones, en los barrios de la periferia la altura del agua adentro de las casas alcanzó el metro y medio, y decenas de autos quedaron flotando en las calles.</p><p>En el Hospital Penna, la inundación del área de Neonatología obligó a que bebés y madres fueran trasladados a habitaciones de pisos superiores, donde ya había personas internadas, y unas pocas familias pudieron ser llevadas a otros centros asistenciales, que también sufrieron el colapso.</p><p></p><p>Además, en el Penna la inundación alcanzó el sector de estacionamiento, donde ambulancias y vehículos particulares quedaron cubiertos por el agua hasta el nivel de las puertas.</p><p>El servicio de transporte urbano quedó totalmente cancelado y la Municipalidad dispuso “el cese absoluto de actividades de todo tipo hasta nuevo aviso". Instó a los vecinos a no salir de sus hogares, evitar la manipulación de cables y no realizar tareas de limpieza en la vía pública para prevenir accidentes.</p><p>Los rescates quedaron en manos de personal de la
policía local, los bomberos y Defensa Civil. Según se informó, Prefectura Naval
y Gendarmería estaban en el lugar y a disposición para colaborar también a
solicitud de la jurisdicción. Asimismo, el Ejército está preparado para ayudar
con alojamiento y evacuación si se requiere.</p><p>Las clases en todos los niveles educativos quedaron suspendidas. La Universidad Nacional del Sur (UNS) informó el levantamiento de todas las actividades académicas y de las Escuelas Preuniversitarias.</p><p>También se suspendió las actividades en centros de día, de primera infancia y programas de la Subsecretaría de Niñez, Adolescencia y Familia, en centros deportivos, en clubes y en instituciones.</p><p>Quedó restringida la circulación en parques y espacios públicos de la ciudad y continúa siendo monitoreada su situación por la comuna.</p><p>Vialidad Nacional suspendió actividades a cielo abierto, pero con guardia y atención para salir a cubrir urgencias donde se necesite en la región.</p><p>La comuna al frente del intendente Federico Susbielles habilitó centros de evacuación en las siguientes direcciones Calle Belén (Güemes 250), Club Sansinena en General Daniel Cerri, el Centro Natan en Villa Caracol y la División del V Cuerpo del Ejército (Florida 1450).</p><p></p><p>Defensa Civil, Delegaciones, Sapem Ambiental (recolección de residuos) y Tránsito del Municipio se encuentran trabajando para dar las respuestas necesarias a la población.</p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                    🔊 Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    ⏸️ Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    ▶️ Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    ⏹️ Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/809009-un-impresionante-temporal-dejo-a-bahia-blanca-bajo-el-agua'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la página principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: 'La tormenta provocó estragos. Un impresionante temporal dejó a Bahía Blanca bajo el agua. Las lluvias comenzaron durante la madrugada. En pocas horas cayeron 250 milímetros. Las clases fueron suspendidas y hay complicaciones en toda la ciudad. En el Hospital Penna tuvieron que evacuar el área de neonatología.. ', // Opcional, pero recomendado     
                text: 'La tormenta provocó estragos. Un impresionante temporal dejó a Bahía Blanca bajo el agua. Las lluvias comenzaron durante la madrugada. En pocas horas cayeron 250 milímetros. Las clases fueron suspendidas y hay complicaciones en toda la ciudad. En el Hospital Penna tuvieron que evacuar el área de neonatología.. ',  // Opcional
                url: 'https://www.pagina12.com.ar/809009-un-impresionante-temporal-dejo-a-bahia-blanca-bajo-el-agua'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // Código alternativo si la API Web Share no está disponible
                console.log("Web Share API no soportada");
                // Puedes usar aquí la opción 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuación común
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oración es muy larga, dividirla en la coma más cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya terminó, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>