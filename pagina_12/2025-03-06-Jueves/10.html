<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>El Papa grabó un audio desde el hospital: "Agradezco de corazón las oraciones". El Vaticano difundió el mensaje, a 21 días de su internación. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>El Papa grabó un audio desde el hospital: "Agradezco de corazón las oraciones". El Vaticano difundió el mensaje, a 21 días de su internación. </h1>
            <p>El Vaticano difundió el mensaje, a 21 días de su internación</p><p>"Los acompañó desde acá. Que Dios los bendiga y la virgen los cuide", dijo Francisco en un sorpresivo mensaje. El papa permaneció "estable" y no presentó nuevas crisis respiratorias.</p><p>"Su estado de ánimo sigue siendo bueno"</p><p>A 21 días de su internación en el Policlínico Agostino Gemelli de Roma, los fieles que acudieron este jueves a la Plaza San Pedro para rezar por la salud del papa Francisco escucharon su voz: "Agradezco de todo corazón las oraciones que hacen por mi salud desde la plaza", dijo en un mensaje grabado en español que se reprodujo en la previa de la ceremonia del santo rosario. "Los acompañó desde acá. Que Dios los bendiga y que la virgen los cuide", cerró Francisco su sorpresivo mensaje.</p><p>En una fría noche de fines de invierno en Italia, los cientos de fieles y cardenales presentes en la plaza San Pedro del Vaticano recibieron con aplausos el mensaje, en el que se escucha la entrecortada respiración de Francisco. El mensaje llega tras la aparición de numerosas noticias falsas sobre la salud del papa y de que este mismo jueves fuentes vaticanas, consultadas sobre si se iba a publicar una imagen del papa en el hospital, indicaran que "cada uno es libre de elegir cómo y cuándo hacerse ver, especialmente cuando estás hospitalizado".</p><p>"Me impactó oírlo tan cansado", aseguró a la agencia AFP Claudia Bianchi, una fiel italiana de 50 años. "Fue una señal positiva. Da esperanzas que aún tenga fuerzas para hablar y parece que siempre quiere estar con nosotros", abundó Alessandra Dalboni, de 53 años. John Maloney, un inglés de 76 años, no esperaba "escucharlo tan rápido" dadas las noticias sobre su salud. "Es una buena señal que realmente sea capaz de hablar", agregó el hombre que se encuentra en Roma de peregrinaje por el Jubileo.</p><p>Antes de escuchar la voz de un Francisco agotado por los tratamientos médicos y la larga internación por una bronquitis y una neumonía bilateral, la oficina de prensa del Vaticano difundió el parte de salud en el que se destaca que el papa permaneció "estable" y no presentó nuevas crisis de insuficiencia respiratoria. El informe significó una buena noticia tras las dos crisis que Francisco, a sus 88 años, sufrió el lunes pasado.</p><p>Según el reporte oficial, el papa continúa con fisioterapia respiratoria y motora, mientras que la presión y análisis de sangre se mantuvieron estables. Otro parámetro positivo de la evolución de su salud es que no presentó un nuevo cuadro febril, aunque su pronóstico continúa siendo "reservado".</p><p>En el Policlínico Gemelli, Francisco realizó actividades de trabajo durante la mañana y la tarde del jueves, mientras que alternó el descanso con la oración y antes del almuerzo recibió la Eucaristía. Durante la noche recibió ventilación mecánica no invasiva tras haber sido sometido a oxigenoterapia de alto flujo durante el día, indicó el parte oficial y destacó que "el papa está cooperando con las terapias y su estado de ánimo sigue siendo bueno".</p><p>Esta hospitalización, la cuarta y más larga desde 2021, genera preocupación por los problemas previos que debilitaron la salud de Jorge Bergoglio en los últimos años: operaciones en el colon y el abdomen, y dificultades para caminar. La situación reabrió además los interrogantes sobre su capacidad para desempeñar sus funciones, más aún cuando el derecho canónico no prevé ninguna disposición en caso de un problema grave que pueda afectar a su lucidez.</p><p>Francisco, que en los últimos tiempos descartó la idea de renunciar al cargo como lo hiciera su predecesor Benedicto XVI en 2013, se ausentó el miércoles de la principal misa de imposición de Cenizas, que marca el inicio de Cuaresma. Este rito activó la cuenta atrás de 40 días hasta la Pascua, la fiesta más importante del calendario católico.</p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                    🔊 Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    ⏸️ Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    ▶️ Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    ⏹️ Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/808865-el-papa-grabo-un-audio-desde-el-hospital-agradezco-de-corazo'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la página principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: 'El Papa grabó un audio desde el hospital: "Agradezco de corazón las oraciones". El Vaticano difundió el mensaje, a 21 días de su internación. ', // Opcional, pero recomendado     
                text: 'El Papa grabó un audio desde el hospital: "Agradezco de corazón las oraciones". El Vaticano difundió el mensaje, a 21 días de su internación. ',  // Opcional
                url: 'https://www.pagina12.com.ar/808865-el-papa-grabo-un-audio-desde-el-hospital-agradezco-de-corazo'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // Código alternativo si la API Web Share no está disponible
                console.log("Web Share API no soportada");
                // Puedes usar aquí la opción 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuación común
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oración es muy larga, dividirla en la coma más cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya terminó, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>