<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Operados por el algoritmo: de los filtros de redes sociales al bistur√≠. La inteligencia artificial como espejo. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>Operados por el algoritmo: de los filtros de redes sociales al bistur√≠. La inteligencia artificial como espejo. </h1>
            <p>La inteligencia artificial como espejo</p><p>Cada vez m√°s cirujanos pl√°sticos en todo el mundo reciben la influencia de las redes sociales en los consultorios. Es un fen√≥meno que no es lineal y expone un dilema cuando las mismas herramientas que pueden provocar malestar y ansiedad permiten poner en im√°genes y palabras deseos cargados durante toda una vida.</p><p>Un arma de doble filo</p><p>No es culpa tuya si la nariz no hace juego en tu cara</p><p>Entre redes sociales y herramientas</p><p>‚ÄúOjal√° fuese f√°cil como lo hace la IA‚Äù</p><p>Del otro lado de la pantalla</p><p>Espejito dime t√∫</p><p>Somos historias</p><p>En las redes sociales Romina¬†Reader posa para las fotos como mandando un beso a la c√°mara. Lo hace cuando cuenta cosas de su d√≠a a d√≠a, cuando saluda a los seguidores o responde al hate. Mira a la c√°mara. Le manda un beso. Le habla como si no importara qui√©nes est√°n del otro lado. Ella pas√≥ por mucho y ahora elige vivir su vida as√≠. Pas√≥ por una larga transici√≥n de g√©nero y demasiadas cirug√≠as para verse como se ve. Pas√≥ por suficiente.</p><p></p><p>Tiene dos grandes ojos marrones, una nariz chica, pero ancha y arrugas que no disimulan sus 46 a√±os. El pelo, entre casta√±o y colorado, le llega hasta la mitad de la espalda y cierra una cara de frente ancha y rasgos suaves. En los √∫ltimos a√±os, el olor del antis√©ptico y el bistur√≠ fueron una constante: se hizo la frente, el ment√≥n, los p√≥mulos, la nariz, los labios y se acomod√≥ los huesos de la mand√≠bula y la dentadura.</p><p>Las operaciones no se las hizo para parecerse a nadie, sino para ‚Äúser bonita‚Äù. ‚ÄúPorque siempre me discriminaron‚Äù, se lamenta. Y piensa seguir as√≠: es un tema del que habla con sus cirujanos y con su chat de inteligencia artificial, al que le pide consejos sobre c√≥mo hacer para verse ‚Äúm√°s femenina‚Äù.</p><p>La historia de Romina es particular, pero no es la √∫nica. En el mundo, cada vez m√°s personas llevan sus propias im√°genes alteradas a los consultorios de cirujanos pl√°sticos. Son fotos con filtros de redes sociales o modificaciones realizadas por alguna inteligencia artificial. Seg√∫n un estudio publicado en Cureus, una importante revista de medicina, un 72% de los 68 cirujanos encuestados report√≥ que ‚Äúa menudo‚Äù o ‚Äúsiempre‚Äù los pacientes mencionan filtros de redes sociales en sus consultas.</p><p>Estos mismos datos marcan que los cambios de sus rostros con realidad aumentada de Instagram (67%) y TikTok (59%) son las m√°s mencionadas por los pacientes. Y que los rasgos que m√°s buscan trasladar de las pantallas a los cuerpos tiene que ver con conseguir ojos m√°s grandes (46%), nariz m√°s delgada (44%), piel m√°s suave (41%) y mand√≠bula m√°s definida (36%).</p><p>La tendencia, por m√°s de que a√∫n no hay datos oficiales, puede verse tambi√©n en Argentina. As√≠ lo confirma Jorge Wetzel, presidente de la Sociedad Argentina de Cirug√≠a Pl√°stica Est√©tica y Reparadora, quien asegura que antes los pacientes iban a su consultorio con una foto impresa y le preguntaban si pod√≠a hacerles una ‚Äúnariz como la de Julieta Prandi‚Äù. Ahora las fotos con filtros son parte de la nueva norma: ‚ÄúHay programas comerciales, como Crisalix, donde se carga la foto del paciente y se modifica para mostrar un posible resultado, por ejemplo en una rinoplastia. Es √∫til, pero puede ser un arma de doble filo‚Äù.</p><p>Levi Jed Murphy tiene ojos celestes, casi transparentes, y algo achinados. Debajo de unos blancos p√≥mulos lisos, que parecen pegados al hueso malar, nace una nariz respingada, t√≠mida, que contrasta con los labios, rosados y anchos, muy anchos. La mand√≠bula marcada, con fuertes l√≠neas rectas, y el cuello tatuado con un mandala en negro, suspenden un aire irreal en su rostro, que¬†es suyo y del algoritmo. El rostro que pag√≥ en cada una de las 15 cirug√≠as. El que compr√≥ por m√°s de 40 mil d√≥lares para parecerse a su filtro de Instagram. El que lo llev√≥ a los portales de todo el mundo como el influencer de las cirug√≠as pl√°sticas y que ahora aconseja a sus seguidores qu√© hacer en base a su experiencia.</p><p>Para llegar al caso de Murphy hubo un largo camino. El primero en hablar de ‚Äúdismorfia de Snapchat‚Äù fue el m√©dico Tijion Esho, quien tiene varias cl√≠nicas de cosm√©tica en el Reino Unido, en 2018. Seg√∫n explic√≥ entonces, con esta categor√≠a buscaba explicar por qu√© algunos pacientes se realizaban una cirug√≠a pl√°stica para emular una versi√≥n digitalmente alterada de s√≠ mismos. En este caso, por Snapchat, una red social que sirve para conversar mediante fotos.</p><p>Sin embargo, en t√©rminos m√°s generales es apropiado hablar de trastorno dism√≥rfico corporal, explica el m√©dico psiquiatra y vicepresidente de la Asociaci√≥n Argentina de Psicofarmacolog√≠¬≠a y Neurociencias (APNA), Ricardo P√©rez Rivera. Se trata de un trastorno donde una persona se siente ‚Äúafligida por una o m√°s √°reas de su cuerpo que le generan malestar y angustia‚Äù, algo que los lleva a ‚Äútener conducta evitativa y chequeo de esas √°reas de manera permanente‚Äù.</p><p>‚ÄúLa dismorfia es un trastorno que est√° descrito desde fines del 1800. Con lo cual, no es algo de la √©poca. Pero en la medida en la que cada vez las personas se fueron exponiendo m√°s a su propia imagen, cuadros que eran subcl√≠nicos pasaron a ser cl√≠nicos. Personas que ten√≠an alg√∫n tipo de malestar con un √°rea del cuerpo, pero que eran funcionales, al verse presionados por esta presi√≥n social sobre la imagen, pasaron a sufrir algo disfuncional, que le genera mayor malestar‚Äù, comenta ante la pregunta de este medio.</p><p>El panorama en este punto parece tomar vertientes. Por un lado, los filtros y las herramientas de inteligencia artificial se expresan en casos como los de Murphy y tanto otros que ‚Äîcomo una reinterpretaci√≥n digital del mito de Narciso‚Äî se vieron tanto a sus selfies distorsionadas que se ahogaron en ese mundo y ahora se extra√±an frente a sus rasgos naturales. Por otro lado, los casos como los de Romina, donde la tecnolog√≠a parece ayudar a poner en palabras un deseo cargado a cuestas toda una vida. Un deseo que tambi√©n puede ser da√±ino si se mira como al espejo de la bruja de Blancanieves ‚Äîsiguiendo con las met√°foras de los cl√°sicos‚Äî y se toma por verdad lo que hay del otro lado, por m√°s de que quiz√°s sea imposible de realizar.</p><p>‚ÄúLa cirug√≠a est√©tica, ¬øqu√© es? ¬øEs verse en armon√≠a con el cuerpo o es tratar de resolver un conflicto interno que tiene uno con algo que les disgusta de su morfolog√≠a?‚Äù, se pregunta el cirujano pl√°stico Marcelo Mackfarlane sentado sobre la camilla de un consultorio fr√≠o despu√©s de un d√≠a agitado de citas y turnos en una cl√≠nica privada del barrio de Balvanera. Marcelo es quien realizo varias de las operaciones de Romina, entre ellas la vaginoplastia, y quien ahora explica c√≥mo algunas herramientas impactan de lleno en algunos sectores de la poblaci√≥n, como la comunidad trans.</p><p>‚ÄúMuchas veces los pacientes vienen con una captura de pantalla y me dicen m√°s o menos quisiera que me quede as√≠. Dentro de lo que es la est√©tica tengo muchos pacientes transg√©nero. Hago mucha armonizaci√≥n facial. Y ah√≠ es donde m√°s veo que el paciente opta por usar filtros de TikTok, que tiene varias m√°scaras, y hacen una foto de la pantalla. Eso se est√° viendo mucho‚Äù, comenta Marcelo, a quien Romina considera ‚Äúcomo un padre‚Äù por todo el apoyo que recibi√≥ de √©l.</p><p>‚ÄúAntes los pacientes tra√≠an una foto de un icono de la belleza del mundo. Pero con el advenimiento de la tecnolog√≠a se est√° influyendo mucho en las cirug√≠as. Esto ayuda. Porque uno puede tener mediciones m√°s precisas y llegar a un resultado m√°s cercano a lo que el paciente quiere. Un resultado no mejor en calidad, sino en la est√©tica del paciente‚Äù, a√±ade.</p><p>Pero tambi√©n un resultado que puede ser imposible. ‚ÄúLas tecnolog√≠as vienen a ayudarnos, pero hay limitaciones. Tal vez el caso de una transici√≥n y ver c√≥mo alguien se puede ver con rasgos femeninos fue de ayuda. En mi caso, que un paciente me venga con una nariz operada por un programa no me sirve, porque me da un nivel de exigencia que mi mano y mi conocimiento no va a poder lograr, porque nunca va a poder igualar a una imagen de una computadora, porque estamos trabajando con piel, cart√≠lago y huesos‚Äù, cont√≥ por su lado Fabi√°n P√©rez Rivera, cirujano pl√°stico y miembro de la Sociedad Argentina de Cirug√≠a Pl√°stica.</p><p>‚Äî Con la inteligencia artificial me puse labio y me oper√© de p√°rpado y le hice mirada de gata jiji.</p><p>‚Äî Ojal√° fuese f√°cil como lo hace la IA.</p><p>El di√°logo no es inventado, es un chat que ocurri√≥ entre Romina y uno de los m√©dicos con los que suele consultar. La foto adjunta al chat es de una muchacha joven, de unos treinta a√±os, rostro peque√±o, ojos avellana con un delineado terminado en punta, una diminuta nariz redondeada, piel blanca, sin arrugas m√°s que por un leve hoyuelo que acompa√±a una sonrisa sutil. Un rostro sim√©trico y artificial, imposible de llevar al quir√≥fano.</p><p>A Romina la imagen se la dio el ChatGPT, que cuando le habla, la trata de ‚Äúcoraz√≥n‚Äù y le dice que la ‚Äúentiende‚Äù, pero tambi√©n le advierte que tiene que hacerle algunas ‚Äúaclaraciones importantes‚Äù: ‚ÄúYo no soy m√©dica ni puedo reemplazar la opini√≥n de tu cirujano pl√°stico, pero s√≠ puedo explicarte de forma clara en qu√© consisten las cirug√≠as que mencion√°s, c√≥mo suele ser la recuperaci√≥n y qu√© significan los estudios que nombr√°s‚Äù. Despu√©s, s√≠, el modelo de lenguaje explica en qu√© consiste una blefaroplastia, un cat eye y un relleno de labios, c√≥mo son los postquir√∫rgicos de cada intervenci√≥n y qu√© estudios m√©dicos deber√≠a realizarse antes de llegar al quir√≥fano.</p><p>‚Äî ¬øTe acord√°s la primera vez que usaste un la inteligencia artificial para buscar a ver c√≥mo te sent√≠as mejor?</p><p>‚Äî Dicen que, ac√° en Jujuy, yo soy influencer. Por eso le empec√© a preguntar cosas sobre m√≠. Despu√©s le preguntaba si me pod√≠a hacer ciertas cirug√≠as, c√≥mo iba a ser el postoperatorio, c√≥mo ten√≠a que cuidarme. Cuando descubr√≠ el ChatGPT comenc√© a mandarle fotos. Pero yo no s√© si es muy privado. Porque vos pon√©s informaci√≥n o ten√©s los audios abiertos, te est√° como vigilando. Entonces pongo fotos m√≠as, le di todos mis datos, y le digo si me podr√≠a hacer cierta cirug√≠a. Le pongo mi coagulograma, mis cosas, a ver si me puedo hacer cirug√≠as en la cara. Porque si no estoy sana, no me puedo operar. Entonces le pregunto, le pido qu√© cirug√≠a me puedo hacer. Tambi√©n hablo con el doctor.</p><p>‚Äî ¬øY vos qu√© referencia le dec√≠s?</p><p>‚Äî Yo no me quiero parecer a nadie. Quiero tener rasgos muy marcados femeninos. Yo quiero ser bonita. Porque siempre me discriminaron. Entonces busco tambi√©n eso.</p><p>‚Äî¬øTe hiciste alguna cirug√≠a en base a una recomendaci√≥n de la IA?</p><p>‚Äî Yo le dije m√°s o menos lo que quer√≠a al cirujano y √©l tambi√©n. Marcelo me hizo la cara y le dije lo que quer√≠a, pero me hizo mejores resultados que la inteligencia artificial tambi√©n. Yo cuando fui con √©l fui por la vaginoplastia. Para m√≠ es como un padre. √âl me hizo cinco cirug√≠as en la cara. Pero yo tambi√©n le iba diciendo c√≥mo quer√≠a y le preguntaba a la inteligencia artificial. Le iba preguntando c√≥mo hacer para tener esos rasgos. Pero ellos siempre me dicen que tienen que ver, que tienen que examinar. Porque no puedo operarme cada dos meses y buscar un resultado. Me dijeron que no me puedo operar toda la cara. Que la cara se va recuperando y es importante para tener m√°s exactitud.</p><p>Romina le pregunt√≥ a la inteligencia artificial c√≥mo podr√≠a hacer para verse m√°s femenina, pero, ¬øqu√© significa esto para un Gran Modelo de Lenguaje (LLM) como ChatGPT? La respuesta no es est√°tica y va cambiando, pero se puede encontrar si se hace una anatom√≠a de su funcionamiento. Y la encargada de hacer este procedimiento es Maria Frances Gaska, que no es cirujana, sino directora de tecnolog√≠a de Humai, una organizaci√≥n que trabaja por la inteligencia artificial en proyectos de impacto social, y est√° siempre pendiente de los lanzamientos y actualizaciones de los sistemas de IA.</p><p>‚ÄúEl tema de los sesgos en inteligencia artificial existe desde los modelos m√°s primitivos que hab√≠a mucho antes de los LLM. Porque los modelos aprenden de datos. Reflejan los datos con los que fueron entrenados. Pero hay algo interesante. Cuando se empez√≥ a combatir el problema de los sesgos, se hizo hincapi√© en trabajar sobre los datos de entrenamiento para que fueran representativos de toda la poblaci√≥n y no estuvieran sesgados ni contuvieran informaci√≥n maliciosa‚Äù, empieza Frances Gaska su an√°lisis para explicar por qu√© para entender lo que significa ‚Äúmujer‚Äù para una IA, hay que ver sus datos.</p><p>Y agrega: ‚ÄúEsto se empieza a dejar de poder hacer con los modelos m√°s grandes. Porque es tanta la informaci√≥n que hay que pasarle que no se puede curar ni categorizarla para asegurarse de que ning√∫n grupo est√° subrepresentado. Entonces se pasa del foco de curar el contenido a curar los outputs. Se crean filtros de contenido. Antes de presentarle al usuario los resultados, se transforman. Los filtros que hoy est√°n ah√≠ son de seguridad del contenido. Mayormente, lo hacen diciendo que no van a responder. Este cambio de enfoque se llev√≥ puesta la representatividad‚Äù.</p><p>En el universo de los filtros de redes sociales quien hace la punci√≥n es Andr√©s Loaiza, realizador audiovisual apasionado por la realidad aumentada, quien en sus redes sociales hace tutoriales para que cualquiera, desde su casa, pueda sumar su granito de arena a la playa infinita de filtros que inunda cada una de las plataformas sociales.</p><p>Detr√°s de los filtros que te alisan la piel, te achican la nariz, agregan pecas o achinan los ojos, explica Loaiza, est√° el mundo de la realidad aumentada. ‚ÄúEl filtro es algo digital aplicado a la realidad. En un filtro del rostro, lo real eres t√∫. Lo que se aplica y la informaci√≥n que se agrega es lo digital‚Äù, cuenta desde su estudio en Colombia mientras mira a una c√°mara que lo apunta en un leve cuadro contrapicado que muestra con nitidez la remera de Boca Juniors que lleva puesta.</p><p>‚ÄúHay muchos tipos de filtros. Ser√≠a dif√≠cil enumerarlos todos, pero los m√°s fuertes son los de maquillaje o est√©ticos, que transforman algo del rostro. O los juegos. Ya un tercer grupo podr√≠an ser los filtros m√°s enfocados el tema de marcas, filtros empresariales. Son los tres pilares del tema de los filtros‚Äù, explica.</p><p>Para crear y subir un filtro es necesario conocimiento, pero no hace falta ser un gran experto. ‚ÄúUn suavizado de piel puede demorarse un par de d√≠as, dependiendo la dedicaci√≥n. En unos tres d√≠as se pueden sacar. Esos son b√°sicos, que tienen un nivel de complejidad. Hay que saber qu√© quer√©s manipular. Porque todo est√° ah√≠ y tienes que escoger la pieza para suavizar la piel, para cubrir tal o cual arruga‚Äù.</p><p>Cuando era chica, a Romina le gustaba jugar con sus amigas a Almorzando con Mirtha Kolla. Siempre era elegida la ‚Äúreina‚Äù de la mesa. A√∫n faltaban d√©cadas para que pudiera empezar su transici√≥n de g√©nero. Y el camino hasta ah√≠ no fue f√°cil. A los 13, su pap√° la secuestr√≥ y, enojado por su identidad, la mand√≥ a un internado de varones en Maimar√°. Fue el puntapi√© de una vida de huidas y dolor. ‚ÄúMe encerr√© en mi mundo, no habl√© con nadie‚Äù, cuenta. Treinta a√±os m√°s tarde, y luego de dos intentos de suicidio, sus palabras est√°n cargadas de vitalidad: ‚ÄúAhora lucho. Ahora quiero vivir. Ya no quiero morir‚Äù.</p><p>Ahora tambi√©n el silencio qued√≥ atr√°s. ‚Äú¬øSab√©s qu√© es lo lindo de contar? Que yo primero lo contaba sin intenciones. Y esto me hizo que ayude a mucha gente. Porque mucha gente no se anima a exponerse. Yo vivo todo el d√≠a encerrada en mi casa tambi√©n, pero ya no importa lo que piensen los dem√°s. Porque los seis meses que estuve en el hospital, mi mam√° estuvo a mi lado, pero hay mucha gente que se esfum√≥‚Äù, dice antes de virar el relato a su primer viaje a Capital Federal y c√≥mo termin√≥ durmiendo en una plaza antes de que la Iglesia la ayudara a comprar un pasaje de vuelta.</p><p>Su historia ‚Äîrelatada en una amena charla de tel√©fono y escrita en un libro hecho con ayuda de la IA y difundido en sus redes sociales‚Äî da sentido al mensaje que llega ni bien termina la entrevista, un mensaje de agradecimiento. Dice que la experiencia de poder contar su historia es de por s√≠ valiosa y que espera que ayude a muchas personas. Despu√©s manda un video selfie mientras camina por la calle, mira a c√°mara, sonr√≠e y muestra algo de su barrio juje√±o a la hora de la siesta.</p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                    üîä Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    ‚è∏Ô∏è Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    ‚ñ∂Ô∏è Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    ‚èπÔ∏è Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/863168-operados-por-el-algoritmo-de-los-filtros-de-redes-sociales-a'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la p√°gina principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: 'Operados por el algoritmo: de los filtros de redes sociales al bistur√≠. La inteligencia artificial como espejo. ', // Opcional, pero recomendado     
                text: 'Operados por el algoritmo: de los filtros de redes sociales al bistur√≠. La inteligencia artificial como espejo. ',  // Opcional
                url: 'https://www.pagina12.com.ar/863168-operados-por-el-algoritmo-de-los-filtros-de-redes-sociales-a'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // C√≥digo alternativo si la API Web Share no est√° disponible
                console.log("Web Share API no soportada");
                // Puedes usar aqu√≠ la opci√≥n 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuaci√≥n com√∫n
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oraci√≥n es muy larga, dividirla en la coma m√°s cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya termin√≥, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>