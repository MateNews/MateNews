<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Un mega apag贸n afect贸 a Espa帽a y Portugal. Lentamente vuelve la luz en la Pen铆nsula Ib茅rica. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>Un mega apag贸n afect贸 a Espa帽a y Portugal. Lentamente vuelve la luz en la Pen铆nsula Ib茅rica. </h1>
            <p>Lentamente vuelve la luz en la Pen铆nsula Ib茅rica</p><p></p><p>Apag贸n y caos</p><p>El apag贸n en Portugal</p><p>Un corte de luz masivo ocurrido este lunes al mediod铆a impact贸 a toda la pen铆nsula ib茅rica y oblig贸 a paralizar el tr谩fico ferroviario en Espa帽a. Una parte del sur de Francia tambi茅n se vio brevemente afectada.</p><p>El gestor de la red el茅ctrica espa帽ola, Red El茅ctrica, advirti贸 que se necesitar铆an entre "6 y 10 horas" para recuperar totalmente el suministro y pidi贸 evitar "especulaciones" sobre el origen del apag贸n, que todav铆a se est谩 investigando. Por la tarde comenz贸 a volver la luz en zonas del norte, sur y oeste de Espa帽a.</p><p>"Ya se ha recuperado la tensi贸n en subestaciones de varias zonas del norte, sur y oeste peninsular empezando a dar suministro a consumidores de dichas zonas", indic贸 la Red El茅ctrica espa帽ola en un comunicado.</p><p>"Activados planes de reposici贸n del suministro el茅ctrico en colaboraci贸n con las empresas del sector tras el cero (ca铆da total de tensi贸n, NDLR) ocurrido en el sistema peninsular", hab铆a anunciado un poco antes en X Red El茅ctrica, donde precis贸 que "se est谩n analizando las causas" del apag贸n.</p><p>El administrador espa帽ol de las infraestructuras ferroviarias (Adif) anunci贸 en X que debido al apag贸n, estaba "interrumpido el tr谩fico ferroviario en toda la red".</p><p>Tanto en Madrid, en el centro peninsular, como en Barcelona, en el noreste, numerosos habitantes salieron a la calle, con el tel茅fono en la mano, en busca de cobertura. Muchos sem谩foros no funcionaban, lo que oblig贸 a los autos a circular lentamente.</p><p>Los metros tambi茅n se detuvieron y la Direcci贸n General de Tr谩fico (DGT) pidi贸 a los habitantes "que eviten circular en la medida de lo posible".El alcalde de Madrid, Jos茅 Luis Mart铆nez Almeida, lanz贸 un llamado parecido a la poblaci贸n. "Si podemos, nos quedamos donde estamos [...] estamos todos en una situaci贸n complicada", declar贸 el primer edil a la radio p煤blica RNE.</p><p>Por su parte, el gestor de aeropuertos espa帽oles Aena indic贸 que sus instalaciones est谩n operativas gracias a los grupos electr贸genos de emergencias. "Los aeropuertos est谩n operativos con los sistemas el茅ctricos de contingencia", aunque hay retrasos en vuelos, afirm贸 Aena en X.</p><p>El presidente del gobierno, Pedro S谩nchez, se desplaz贸 al centro de control de Red El茅ctrica y su oficina indic贸 que el gobierno  "est谩 trabajando para conocer el origen y la afectaci贸n de esta incidencia y dedicando todos los recursos para solventarla cuanto antes".</p><p>En Portugal el gestor de la red el茅ctrica nacional (REN) confirm贸 "un corte masivo de luz en toda la pen铆nsula ib茅rica, que afecta tambi茅n una parte del territorio franc茅s y cuyo impacto alcanz贸 Portugal desde las 11.33.".</p><p>"Se activaron todos los planes de restablecimiento por etapas del suministro de energ铆a, en coordinaci贸n con los productores y operadores europeos de energ铆a", precis贸 REN en un comunicado. "Las posibles causas del incidente se est谩n analizando", a帽adi贸.</p><p>Seg煤n dijo el ministro portavoz del gobierno, Antonio Leitao Amaro, a la agencia de noticias Lusa, "al parecer se tratar铆a de un problema en la red de transporte [de energ铆a el茅ctrica] cuya causa todav铆a est谩 por identificar, al parecer en Espa帽a".</p><p>En Francia, el corte de electricidad afect贸 al Pa铆s Vasco (en el suroeste) y dur贸 poco. El gestor franc茅s de la red anunci贸 que hab铆a restablecido el suministro.</p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                     Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    革 Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    讹 Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    癸 Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/821573-un-mega-apagon-afecta-a-espana-portugal-y-francia'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la p谩gina principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: 'Un mega apag贸n afect贸 a Espa帽a y Portugal. Lentamente vuelve la luz en la Pen铆nsula Ib茅rica. ', // Opcional, pero recomendado     
                text: 'Un mega apag贸n afect贸 a Espa帽a y Portugal. Lentamente vuelve la luz en la Pen铆nsula Ib茅rica. ',  // Opcional
                url: 'https://www.pagina12.com.ar/821573-un-mega-apagon-afecta-a-espana-portugal-y-francia'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // C贸digo alternativo si la API Web Share no est谩 disponible
                console.log("Web Share API no soportada");
                // Puedes usar aqu铆 la opci贸n 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuaci贸n com煤n
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oraci贸n es muy larga, dividirla en la coma m谩s cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya termin贸, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>