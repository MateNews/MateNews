<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>La misa de Cristina. Miles de personas pasan a saludar a la expresidenta antes de marchar. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>La misa de Cristina. Miles de personas pasan a saludar a la expresidenta antes de marchar. </h1>
            <p>Miles de personas pasan a saludar a la expresidenta antes de marchar</p><p></p><p>Hace d√≠as que la esquina de San Jos√© y Humberto Primo se volvi√≥ un lugar de peregrinaci√≥n del peronismo, que hasta el martes a la tarde iba a ser tambi√©n el punto de partida de la masiva movilizaci√≥n en apoyo a Cristina Fern√°ndez de Kirchner. Los planes cambiaron, la militancia concentra en distintas alturas de la 9 de Julio para marchar a Plaza de Mayo, pero bajo el departamento de la l√≠der justicialista la gente no para de llegar, de cantar, de mirar a ver si sale al balc√≥n o si la llega a ver a trav√©s de las ventanas. ‚ÄúVenimos a la misa y nos vamos‚Äù, dice un hombre que se abre paso entre la multitud para acercarse.</p><p>Anabel se emociona cuando habla de Cristina. Tiene 39 a√±os, est√° con un grupo de amigos con los que vinieron de Boulogne y es la primera vez que se acercan a esta (ahora famosa) esquina de Constituci√≥n. ‚ÄúPara m√≠ Cristina representa derechos, el bienestar del pueblo‚Äù, cuenta a P√°gina|12. Ella, que viene de familia peronista, no estaba interesada en la pol√≠tica. ‚ÄúEl odio a ella me hizo amarla‚Äù, agrega y conf√≠a en que los organismos internacionales act√∫en ante ‚Äúuna persecuci√≥n pol√≠tica evidente‚Äù.</p><p>El repertorio musical es variado y va de los c√°nticos de los que son ‚Äúde la gloriosa Juventud Peronista‚Äù hasta el himno nacional, que suena en medio del humo de las parrillas que se preparan para el almuerzo. Hay pasacalles atados a todos los √°rboles y postes cercanos a las ochavas, pero no falta alguien que se trepa para colgar uno m√°s, azul oscuro, con la cara de Diego Maradona y el perfil de las Malvinas que no se termina de desplegar por ser muy extenso en una calle angosta.</p><p>Aunque las personas miran para arriba expectantes, la puerta del balc√≥n no se abre, pero Cristina aparece v√≠a X para decir que de momento no puede salir y que sus abogados presentaron un recurso ante el Tribunal para que aclare "qu√© comportamiento se encuentra prohibido".</p><p>‚ÄúHicieron otro Puerta de Hierro‚Äù, opina Ana. Ella bord√≥ los rect√°ngulos de tela que lleva con  dos de sus amigas, Fernanda y Florencia, a modo de carteles caseros: ‚ÄúCristina. El mejor cuadro pol√≠tico‚Äù, dice en hilos de colores. Las tres esperan que vaya mucha gente a Plaza de Mayo, ‚Äúque seamos muchos, que no nos acobardemos y que el pueblo se despierte y organice porque la lucha organizada es la √∫nica manera de vencer al neofacismo‚Äù. ‚ÄúPorque hoy es Cristina, pero ma√±ana puede ser cualquiera que se presente‚Äù, advierte Florencia.</p><p>Los carteles de militantes autoconvocados est√°n por todas partes. Abrazan las paredes del edificio donde vive la expresidenta y se extienden por el resto de las calles. ‚ÄúCristina libre‚Äù; ‚ÄúCristina el pueblo te ama‚Äù; ‚ÄúGracias al Progresar pude ser licenciada. Gracias Cristina‚Äù; ‚ÄúYegua, nunca mascota‚Äù. Y una mujer escribe con un cray√≥n rojo en Humberto Primo, a una cuadra del departamento: ‚ÄúConan ha muerto‚Äù.</p><p>En la vereda de enfrente, el artista MXM Tinta, que forma parte del colectivo Tinta y Memoria, cuenta que viene ‚Äúa bancar la democracia‚Äù mientras pega afiches dise√±ados por el grupo. Con los papeles, forma una guirnalda de flores azules, las No me olvides, que se volvieron un s√≠mbolo de la resistencia peronista durante la proscripci√≥n de Juan Domingo Per√≥n y que florecen una vez m√°s para decir: ‚ÄúNo me olvides, no me olvides, no me olvides, volveremos otra vez‚Äù.</p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                    üîä Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    ‚è∏Ô∏è Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    ‚ñ∂Ô∏è Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    ‚èπÔ∏è Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/835126-la-misa-de-cristina'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la p√°gina principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: 'La misa de Cristina. Miles de personas pasan a saludar a la expresidenta antes de marchar. ', // Opcional, pero recomendado     
                text: 'La misa de Cristina. Miles de personas pasan a saludar a la expresidenta antes de marchar. ',  // Opcional
                url: 'https://www.pagina12.com.ar/835126-la-misa-de-cristina'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // C√≥digo alternativo si la API Web Share no est√° disponible
                console.log("Web Share API no soportada");
                // Puedes usar aqu√≠ la opci√≥n 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuaci√≥n com√∫n
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oraci√≥n es muy larga, dividirla en la coma m√°s cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya termin√≥, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>