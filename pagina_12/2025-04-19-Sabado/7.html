<!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>"No nos desanimemos". El mensaje del papa Francisco en Viernes Santo. </title>
        <style>
            body {
                max-width: 800px;
                margin: auto;
                padding: 5%;
            }
            .btnL {
                background: #d1d1d1;
                border-radius: 7px;
                padding: 18px;
                min-width: 100%;
                color: #000000;
                font-size: medium;
                min-height: 70px;
            }
            button {
                background-color: #d1d1d1;
                color: white;
                padding: 10px 20px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                margin: 5px;
            }
            button:disabled {
                background-color: #d1d1d1;
                cursor: not-available;
            }
            button:hover:not(:disabled) {
                background-color: #d1d1d1;
            }
            #voiceSelect {
                margin: 10px 0;
                padding: 5px;
            }
            .controls {
                margin: 10px 0;
            }

            #fullscreenButton {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px;
                background-color: transparent;
                border: none;
                cursor: pointer;
                border-radius: 5px;
            }

            #fullscreenIcon {
                width: 24px;
                height: 24px;
            }

        </style>
    </head>
    <body>
        <button id="fullscreenButton">
        <svg id="fullscreenIcon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>
        </svg>
        </button>

        <div id="texto">
            <h1>"No nos desanimemos". El mensaje del papa Francisco en Viernes Santo. </h1>
            <p>Mensaje del Papa en Viernes Santo</p><p>"La luz resplandece lentamente incluso si nos encontramos en tinieblas", escribi贸 el papa en su homil铆a</p><p></p><p>El mensaje</p><p>Ceremonia</p><p></p><p>El papa Francisco (foto) pidi贸 ser mensajeros de esperanza "mientras tantos vientos de muerte a煤n soplan sobre nosotros", en la homil铆a que hab铆a preparado para la Vigilia del S谩bado Santo y que en su ausencia, mientras contin煤a su convalecencia por su infecci贸n respiratoria, fue le铆a por el cardenal Giovanni Battista Re en la bas铆lica de San Pedro.</p><p>El Papa, que se encuentra a煤n convaleciente por la grave infecci贸n respiratoria por la que tuvo que estar ingresado 38 d铆as en el hospital Gemelli de Roma, del que fue dado de alta el 23 de marzo, acudi贸 antes de la ceremonia a la bas铆lica a rezar ante la tumba de San Pedro y a saludar a los peregrinos.</p><p>El papa deleg贸 en Re, decano del colegio cardenalicio, para oficiar esta larga celebraci贸n de m谩s de dos horas, en la que se conmemora la espera de la resurrecci贸n de Jes煤s y que inicia con la bas铆lica totalmente a oscuras mientras que poco a poco se va iluminado con la luz de las velas de los fieles y concelebrantes.</p><p>antes de leer la homil铆a preparada por Francisco.</p><p></p><p></p><p></p><p>, escribi贸 el papa en su homil铆a.</p><p>Francisco pidi贸 "reproducir la Pascua en nuestra vida y convertirnos en mensajeros de esperanza, constructores de esperanza mientras tantos vientos de muerte a煤n soplan sobre nosotros".</p><p>"Podemos hacerlo con nuestras palabras, con nuestros peque帽os gestos cotidianos, con nuestras decisiones inspiradas en el Evangelio", a帽adi贸 el papa.</p><p>Inst贸 a los fieles a con su vida ser presencia de esperanza para "quienes carecen de fe en el Se帽or, para quienes se han extraviado, para los que se han rendido o caminan encorvados por el peso de la vida".</p><p>Y tambi茅n "para quienes est谩n solos o encerrados en su propio dolor; para todos los pobres y oprimidos de la tierra; para las mujeres humilladas y asesinadas; para los ni帽os que nunca nacieron y para aquellos que son maltratados; para las v铆ctimas de la guerra".</p><p>La ceremonia, una de las m谩s largas de la tradici贸n y cargada de simbolismos, comenz贸 con la bendici贸n del fuego en el atrio de la bas铆lica y el encendido del cirio pascual. Despu茅s se produjo la tradicional procesi贸n con la entrada de los concelebrantes en total silencio y a oscuras, y s贸lo con las velas encendidas para representar la ausencia de luz tras la muerte de Jesucristo.</p><p>S贸lo despu茅s de que el di谩cono pronunci贸 tres veces la frase 'Lumen Christi' (La luz de Cristo) se encendieron las luces de la bas铆lica y comenz贸 la misa ante 6.000 fieles.</p><p>Esta larga ceremonia sigue la tradici贸n de los primeros a帽os de la Iglesia, la de los catec煤menos, los adultos que aspiraban a convertirse al cristianismo y, por ello, tambi茅n se celebr贸 la bendici贸n del agua, y el cardenal Re bautiz贸 a tres adultos.</p><p>El papa quiere estar este domingo en la bendici贸n Urbi et Orbi tras la misa del Domingo de Resurrecci贸n en la plaza de San Pedro, aunque depender谩 de su salud, seg煤n inform贸 la oficina de prensa del Vaticano.</p><p>Francisco ha estado ausente en todos los ritos de la Semana Santa vaticana y s贸lo acudi贸 en la tarde del Jueves Santo a la c谩rcel romana de Regina Coeli, cerca del Vaticano, para un saludo a los reclusos c贸mo hab铆a hecho desde el inicio del pontificado.</p><p>La misa de Resurrecci贸n en la plaza de san Pedro estar谩 oficiada por el cardenal Angelo Comastri, mientras que al papa se le espera justo despu茅s para el mensaje de Pascual desde el balc贸n, aunque con seguridad lo leer谩 un colaborador y posteriormente impartir谩 la tradicional bendici贸n Urbi et Orbi (A la ciudad y al mundo) que se realiza s贸lo en Navidad y en Semana Santa.</p><p></p><p></p>
        </div>
        <br><br><br>
            <div style="display: none;">
                <label for="voiceSelect">Seleccionar voz:</label>
                <select id="voiceSelect"></select>
            </div>
            <div class="controls">
                <button onclick="startReading()" id="playButton">
                     Leer
                </button>
                <button onclick="pauseReading()" id="pauseButton" disabled style="display: none;">
                    革 Pausar
                </button>
                <button onclick="resumeReading()" id="resumeButton" disabled style="display: none;">
                    讹 Continuar
                </button>
                <button onclick="stopReading()" id="stopButton" disabled>
                    癸 Detener
                </button>
            </div>
            <div id="progress" style="display: none;"></div>
        <br><br><br>
        <button class="btnL" onclick="compartir()">Compartir</button>
        <br><br><br>
        <button class="btnL" onclick="window.location.href='https://www.pagina12.com.ar/819383-no-nos-desanimemos'">Ver en web original</button>
        <br><br><br>
        <!-- <button class="btnL" onclick="window.location.href='https://matenews.github.io/MateNews/'">Volver a la p谩gina principal</button>
        <br><br><br> -->


        <script>
            function compartir() {
            if (navigator.share) {
                navigator.share({
                title: '"No nos desanimemos". El mensaje del papa Francisco en Viernes Santo. ', // Opcional, pero recomendado     
                text: '"No nos desanimemos". El mensaje del papa Francisco en Viernes Santo. ',  // Opcional
                url: 'https://www.pagina12.com.ar/819383-no-nos-desanimemos'
                })
                .then(() => console.log('Contenido compartido exitosamente'))
                .catch((error) => console.error('Error al compartir:', error));
            } else {
                // C贸digo alternativo si la API Web Share no est谩 disponible
                console.log("Web Share API no soportada");
                // Puedes usar aqu铆 la opci贸n 2 (botones personalizados con JavaScript) de mi respuesta anterior
            }
            }
        </script>


        <script>
            let speechSynthesis = window.speechSynthesis;
            let currentUtterance = null;
            let isPaused = false;
            let isReading = false;
            let textBlocks = [];
            let currentBlockIndex = 0;
            let lastSpokenIndex = 0;
            const BLOCK_SIZE = 800;

            function updateButtons(speaking) {
                document.getElementById('playButton').disabled = speaking;
                document.getElementById('pauseButton').disabled = !speaking;
                document.getElementById('resumeButton').disabled = !isPaused;
                document.getElementById('stopButton').disabled = !speaking;
            }

            function updateProgress() {
                const progressDiv = document.getElementById('progress');
                if (isReading) {
                    progressDiv.textContent = `Leyendo bloque ${currentBlockIndex + 1} de ${textBlocks.length}`;
                } else {
                    progressDiv.textContent = '';
                }
            }

            function splitIntoBlocks(text) {
                // Dividir el texto en oraciones usando puntuaci贸n com煤n
                const sentences = text.replace(/([.!?])\s+/g, "$1|").split("|");

                let blocks = [];
                let currentBlock = '';

                sentences.forEach(sentence => {
                    // Si la oraci贸n es muy larga, dividirla en la coma m谩s cercana al BLOCK_SIZE
                    if (sentence.length > BLOCK_SIZE) {
                        let subSentences = sentence.replace(/,\s+/g, ",|").split("|");
                        subSentences.forEach(subSentence => {
                            if (currentBlock.length + subSentence.length > BLOCK_SIZE) {
                                if (currentBlock) blocks.push(currentBlock.trim());
                                currentBlock = subSentence;
                            } else {
                                currentBlock += (currentBlock ? ' ' : '') + subSentence;
                            }
                        });
                    } else {
                        if (currentBlock.length + sentence.length > BLOCK_SIZE) {
                            blocks.push(currentBlock.trim());
                            currentBlock = sentence;
                        } else {
                            currentBlock += (currentBlock ? ' ' : '') + sentence;
                        }
                    }
                });

                if (currentBlock) blocks.push(currentBlock.trim());
                return blocks;
            }

            function speakBlock(index) {
                if (index >= textBlocks.length) {
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                    return;
                }

                currentUtterance = new SpeechSynthesisUtterance(textBlocks[index]);
                currentUtterance.rate = parseFloat(1.3);
                lastSpokenIndex = index;


                currentUtterance.onend = function() {
                    if (isReading && !isPaused) {
                        currentBlockIndex++;
                        updateProgress();
                        speakBlock(currentBlockIndex);
                    }
                };

                currentUtterance.onerror = function(event) {
                    console.error('Error en la lectura:', event);
                    isReading = false;
                    updateButtons(false);
                    updateProgress();
                };

                speechSynthesis.speak(currentUtterance);
            }

            function startReading() {
                const text = document.getElementById('texto').innerText;
                if (!text) return;

                // Detener cualquier lectura previa
                stop();

                // Preparar nueva lectura
                textBlocks = splitIntoBlocks(text);
                currentBlockIndex = 0;
                isReading = true;
                isPaused = false;

                updateButtons(true);
                updateProgress();
                speakBlock(currentBlockIndex);
            }

            function pause() {
                speechSynthesis.pause();
                isPaused = true;
                updateButtons(true);
            }

            function resume() {
                speechSynthesis.resume();
                isPaused = false;
                updateButtons(true);
            }

            function stop() {
                speechSynthesis.cancel();
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                updateButtons(false);
                updateProgress();
            }

            function pauseReading() {
                if (!isReading) return;

                speechSynthesis.pause();
                isPaused = true;
                isReading = false;
                updateButtons(true);
                updateProgress();
            }

            function resumeReading() {
                if (!isPaused) return;

                isPaused = false;
                isReading = true;

                // Si el utterance actual ya termin贸, comenzar con el siguiente bloque
                if (lastSpokenIndex === currentBlockIndex) {
                    currentBlockIndex++;
                }

                updateButtons(true);
                updateProgress();

                // Si hay un utterance pausado, resumirlo
                if (speechSynthesis.paused) {
                    speechSynthesis.resume();
                } else {
                    // Si no hay utterance pausado, comenzar desde el bloque actual
                    speakBlock(currentBlockIndex);
                }
            }

            function stopReading() {
                speechSynthesis.cancel();
                finishReading();
            }

            function finishReading() {
                isReading = false;
                isPaused = false;
                currentBlockIndex = 0;
                lastSpokenIndex = -1;
                currentUtterance = null;
                updateButtons(false);
                updateProgress();
            }

        </script>        

        <script>

            var elem = document.documentElement;
            var fullscreenButton = document.getElementById("fullscreenButton");
            var fullscreenIcon = document.getElementById("fullscreenIcon");

            fullscreenButton.addEventListener("click", function() {
            if (document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                if (document.exitFullscreen) {
                document.exitFullscreen();
                } else if (document.mozCancelFullScreen) { /* Firefox */
                document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) { /* Chrome, Safari and Opera */
                document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE/Edge */
                document.msExitFullscreen();
                }
            } else {
                if (elem.requestFullscreen) {
                elem.requestFullscreen();
                } else if (elem.mozRequestFullScreen) { /* Firefox */
                elem.mozRequestFullScreen();
                } else if (elem.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE/Edge */
                elem.msRequestFullscreen();
                }
            }
            });

            document.addEventListener('fullscreenchange', (event) => {
            if (!document.fullscreenElement) {
                fullscreenIcon.innerHTML = '<path d="M5 5h5v5H5zM14 5h5v5h-5zM5 14h5v5H5zM14 14h5v5h-5z"/>';
            } else {
                fullscreenIcon.innerHTML = '<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>';
            }
            });
        </script>

    </body>
    </html>